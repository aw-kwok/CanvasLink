(()=>{var e=!0;function o(o){var n=o.responseHeaders||[];return n.push({name:"Access-Control-Allow-Origin",value:"*"}),n.push({name:"Access-Control-Allow-Methods",value:"GET, POST, PUT, DELETE, OPTIONS"}),n.push({name:"Access-Control-Allow-Headers",value:"Content-Type, Authorization"}),e&&console.log("handleHeadersReceived executed"),{responseHeaders:n}}function n(n){var s="".concat(n,"/*");chrome.webRequest.onHeadersReceived.removeListener(o),e&&console.log("listener removed"),chrome.webRequest.onHeadersReceived.addListener(o,{urls:[s]},["responseHeaders"]),e&&console.log("added listener")}e&&console.log("listener initialized"),chrome.storage.sync.get(["CANVAS_API_URL"],(function(e){e.CANVAS_API_URL?n(e.CANVAS_API_URL):console.warn("CANVAS_API_URL is not set in storage")})),chrome.storage.onChanged.addListener((function(o,s){if(e&&console.log("URL pattern changed"),"sync"===s&&o.CANVAS_API_URL){var r=o.CANVAS_API_URL.newValue;r&&n(r)}}))})();